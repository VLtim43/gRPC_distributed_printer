syntax = "proto3";

option go_package = "distributed-printer/proto";

package printer;

// Service for the dumb print server (port 50051)
service PrintService {
  rpc Print(PrintRequest) returns (PrintResponse);
}

message PrintRequest {
  string message = 1;
  string client_id = 2;
}

message PrintResponse {
  bool success = 1;
  string result = 2;
}

// Service for communication between clients
service ClientService {
  rpc RequestAccess(AccessRequest) returns (AccessReply);
  rpc ReplyAccess(AccessReply) returns (Empty);
}

// Request message for Ricart-Agrawala 
message AccessRequest {
  string client_id = 1;
  int64 timestamp = 2;
}

// Reply message for Ricart-Agrawala 
message AccessReply {
  string client_id = 1;
  int64 timestamp = 2;
  bool granted = 3;
}

// Empty message 
message Empty {}
